
---

## Описание
**Backend**-часть проекта. Разработана [Кириллом Ручиным](https://github.com/NeKyReal) и [Максимом Засухиным](https://github.com/Zasuherka). Содержит всю логику проекта, представленную в [заданиях](https://github.com/NeKyReal/Recordum/tree/main/development%20phases). Проект разработан в рамках летней производственной практики 2023 года.

---

## Подготовка к запуску проекта
Для установки всех зависимостей и использованных модулей, запустите в терминале следующую команду:
```bash
# установка всех зависимостей
npm install

# если какие-то модули устарели и обычная команда выдает ошибку
npm install --force
```
Чтобы проект заработал на вашем компьютере, вам необходим **docker-контейнер**, где будут храниться данные о созданных вами услугах и прочих сущностях базы данных. 
> В случае, если у вас нет настольного приложения Docker, вы можете скачать его по [ссылке](https://www.docker.com).
> Docker не будет работать без [подсистемы Windows для Linux](https://learn.microsoft.com/ru-ru/windows/wsl/install), поэтому ее нужно установить перед установкой Docker Desktop.
> Чтобы ее установить, введите в терминале PowerShell или командной строке Windows в режиме **администратора** следующую команду:
> ```bash
> wsl --install
> ```
> После всех этих действий будет необходима перезагрузка.

Все конфигурации **docker-контейнера** содержаться в файлах `docker-compose.ymml`, `docker.env` и `.env`. 

> Если вы хотите установить docker-контейнер с PostgreSQL, как это сделали мы, то вам нужно убедиться, что вы уже не имеете установленного PostgreSQL у себя на компьютере, так как это может вызвать конфликт вашего PostgreSQL и образа контейнера для Docker. Если у вас уже есть PostgreSQL, удалите его перед запуском этих команд.

Чтобы создать **docker-контейнер**, необходимо запустить следующую команду:
```bash
# можно так
docker-compose up -d

# или так
docker-compose up --build
```
После успешного создания контейнера, создайте все необходимые связи для базы данных. Чтобы это сделать, нужно обратиться к **Prisma** и ввести следующую команду в терминал:
```bash
# создать зависимости
npx prisma migrate dev

# сбросить зависимости (если обновились модели)
npx prisma migrate reset
```
После успешного выполнения этих команд у вас появится **docker-контейнер**, в котором хранится ваша база данных. Чтобы посмотреть, что находится в таблицах, вы можете использовать сторонние утилиты (если у вас такие имеются), или воспользоваться встроенным функционалом **Prisma**:
```bash
# запустит сервер на 5555 порту и откроет веб-страницу со всеми таблицами
npx prisma studio
```
Как вы могли заметить, в базе уже есть записи. Они добавляются при каждом обновлении зависимостей **Prisma** с помощью `seed.ts`.

---

## Запуск backend-части
Чтобы запустить сервер, введите следующую команду в терминал:
```bash
# development-сервер
npm run start

# режим просмотра (рекомендуется)
npm run start:dev

# production-сервер
npm run start:prod
```

---
